### 缓存穿透
##### 概念
缓存和数据库中都没有的数据, 可用户还是源源不断的发起请求, 导致每次请求都会到数据库, 从而压垮数据库

比如客户查询一个根本不存在的东西，首先从Redis中查不到，然后会去数据库中查询，
数据库中也查询不到，那么就不会将数据放入到缓存中，后面如果还有类似源源不断的请求，
最后都会压到数据库来处理，从而给数据库造成巨大的压力。

##### 解决办法
 1. 业务层校验, 比如根据id 来缓存，检验 id 是否为数字或是否为负
 2. 不存在的数据设置短过期时间
 3. 布隆过滤器: 对于缓存穿透，我们可以将查询的数据条件都哈希到一个足够大的布隆过滤器中，
    用户发送的请求会先被布隆过滤器拦截，一定不存在的数据就直接拦截返回了，
    从而避免下一步对数据库的压力。
    
### 缓存击穿
##### 概念
redis 中一个热点key 在失效的同时, 大量的请求过来, 从而会全部到达数据库, 压垮数据库
##### 解决办法
 1. 设置热点数据永不过期
 2. 定时更新。比如开个定时任务, 要过期前 1分钟定时更新这个热键
 3. 互斥锁: 当key不存在时, 加锁, 去读取db里的数据, 读取完成后，写入 redis 里，其它请求没有获取锁 等待，
    再尝试读取 redis
    
### 缓存雪崩
##### 概念
redis 中缓存的数据大面积同时失效, 或者 redis宕机, 从而导致大量请求直接到数据库, 压垮数据库
##### 解决方法
 1. 设置 key 的有效期均匀分布:
    1.1 避免缓存设置相近的有效期, 可以在设置有效期时增加随机值;
    1.2 或者同一规划有效期, 使得过期时间均匀分布
 2. 数据预热: 对于即将来临得大量请求，我们可以提前走一遍系统, 将数据提前缓存在 redis 中,并设置不同得有效期
 3. 保证 redis 服务的高可用


